<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>7.3.1 – Formulario de Registro</title>
  <style>
    :root { --ok:#16a34a; --err:#dc2626; --bg:#f7f7f8; --ink:#111827; --muted:#6b7280; --line:#e5e7eb; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; background: var(--bg); color: var(--ink); }
    .wrap { max-width: 720px; margin: 48px auto; padding: 0 16px; }
    h1 { margin: 0 0 16px; font-size: 28px; }
    p.note { color: var(--muted); margin: 0 0 24px; }

    .alert { position: relative; border-radius: 8px; padding: 12px 40px 12px 12px; margin: 0 0 16px; border: 1px solid var(--line); display: none; }
    .alert--err { background: #fee2e2; border-color: #fecaca; color: #7f1d1d; }
    .alert--ok  { background: #dcfce7; border-color: #bbf7d0; color: #064e3b; }
    .alert button { position: absolute; right: 8px; top: 8px; border: 0; background: transparent; font-size: 20px; line-height: 1; cursor: pointer; color: inherit; }

    form { background: #fff; border: 1px solid var(--line); border-radius: 12px; padding: 20px; }
    .row { margin-bottom: 14px; }
    label { display: block; font-size: 14px; margin-bottom: 6px; }
    input[type="text"],
    input[type="email"],
    input[type="password"] {
      width: 100%; padding: 10px 12px; border: 1px solid var(--line); border-radius: 8px; font-size: 16px; outline: none;
    }
    input:focus { border-color: #93c5fd; box-shadow: 0 0 0 3px #dbeafe; }
    .invalid { border-color: var(--err) !important; box-shadow: 0 0 0 3px #fecaca !important; }
    .inline { display: flex; align-items: center; gap: 8px; }
    .help { font-size: 12px; color: var(--muted); }

    .btn {
      width: 100%; padding: 12px; border: 0; border-radius: 10px; font-size: 16px; cursor: pointer;
      background: #2563eb; color: #fff;
    }
    .btn:active { transform: translateY(1px); }
    footer { margin-top: 10px; text-align: center; color: var(--muted); font-size: 12px; }
  </style>
</head>
<body>
  <main class="wrap">
    <h1>Registro</h1>
    <p class="note">Completá los campos y aceptá los términos para continuar.</p>

    <!-- ALERTA -->
    <div id="alert" class="alert" role="alert" aria-live="polite">
      <button type="button" aria-label="Cerrar alerta" onclick="hideAlert()">×</button>
      <span id="alertMsg"></span>
    </div>

    <!-- FORMULARIO -->
    <form id="formRegistro" novalidate>
      <div class="row">
        <label for="nombre">Nombre</label>
        <input id="nombre" name="nombre" type="text" autocomplete="name" />
      </div>

      <div class="row">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" autocomplete="email" />
      </div>

      <div class="row">
        <label for="password">Contraseña</label>
        <input id="password" name="password" type="password" autocomplete="new-password" />
        <div class="help">Mínimo 6 caracteres.</div>
      </div>

      <div class="row">
        <label for="password2">Repetir contraseña</label>
        <input id="password2" name="password2" type="password" autocomplete="new-password" />
      </div>

      <div class="row inline">
        <input id="tyc" name="tyc" type="checkbox" />
        <label for="tyc">Acepto los términos y condiciones del servicio.</label>
      </div>

      <div class="row">
        <button class="btn" type="submit">Registrarme</button>
      </div>
    </form>

    <footer>Actividad 7.3.1 · Jóvenes a Programar – Desarrollo Web</footer>
  </main>

  <script>
    // ========= Alert Helpers =========
    const $alert = document.getElementById('alert');
    const $alertMsg = document.getElementById('alertMsg');

    function showAlertSuccess(msg = '¡Registro exitoso!') {
      $alert.className = 'alert alert--ok';
      $alertMsg.textContent = msg;
      $alert.style.display = 'block';
    }
    function showAlertError(msg = 'Los datos ingresados no cumplen con los requisitos solicitados') {
      $alert.className = 'alert alert--err';
      $alertMsg.textContent = msg;
      $alert.style.display = 'block';
    }
    function hideAlert() { $alert.style.display = 'none'; }

    // ========= Validación solicitada =========
    const form = document.getElementById('formRegistro');
    const fields = ['nombre','email','password','password2','tyc'].reduce((acc, id) => {
      acc[id] = document.getElementById(id); return acc;
    }, {});

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      hideAlert();

      // limpiar marcas previas
      [fields.nombre, fields.email, fields.password, fields.password2].forEach(i => i.classList.remove('invalid'));

      const nombre = fields.nombre.value.trim();
      const email = fields.email.value.trim();
      const pass = fields.password.value;
      const pass2 = fields.password2.value;
      const acepto = fields.tyc.checked;

      const errores = [];

      // 1) Ningún campo vacío
      if (!nombre) { errores.push('El campo "Nombre" no puede estar vacío.'); fields.nombre.classList.add('invalid'); }
      if (!email)  { errores.push('El campo "Email" no puede estar vacío.'); fields.email.classList.add('invalid'); }
      if (!pass)   { errores.push('El campo "Contraseña" no puede estar vacío.'); fields.password.classList.add('invalid'); }
      if (!pass2)  { errores.push('El campo "Repetir contraseña" no puede estar vacío.'); fields.password2.classList.add('invalid'); }

      // 2) Contraseña mínimo 6 caracteres
      if (pass && pass.length < 6) {
        errores.push('La contraseña debe tener al menos 6 caracteres.');
        fields.password.classList.add('invalid');
      }

      // 3) Contraseñas iguales
      if (pass && pass2 && pass !== pass2) {
        errores.push('Las contraseñas no coinciden.');
        fields.password.classList.add('invalid');
        fields.password2.classList.add('invalid');
      }

      // 4) Checkbox de términos marcado
      if (!acepto) errores.push('Debes aceptar los términos y condiciones del servicio.');

      if (errores.length) {
        // Mostrar todos los errores en una sola alerta
        showAlertError(errores.join(' '));
        return;
      }

      // Si todo OK → mostrar éxito (acá podrías enviar datos a un backend si hiciera falta)
      showAlertSuccess('Los datos se validaron correctamente. ¡Bienvenido/a!');
      form.reset();
    });
  </script>
</body>
</html>